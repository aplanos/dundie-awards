# Dundie Awards Organization Service

## Overview
This repository contains the **Dundie Awards Organization Service**, a backend service responsible for managing employees, organizations, job scheduling, and messaging within the Dundie Awards system. The service is structured following the **hexagonal architecture** pattern, separating concerns into application, domain, and infrastructure layers.

## Features

- API for managing organizations, employees and awards
- Messaging integration with RabbitMQ
- Caching integration with Redis
- Rollback and Backoff configured when events fails
- Security configuration for token validation using JWT
- Swagger configured for API documentation

## API Documentation

Swagger has been configured to document the API endpoints. You can access the API documentation at:

```
http://localhost:8080/swagger-ui.html
```
## Project Structure

### **Application Layer (`application/`)**
The application layer exposes APIs and handles business logic processing.

- **`api/`** - Contains REST APIs:
    - `EmployeeApi` - Manages employee-related API operations.
    - `OrganizationControllerApi` - Manages organization-related API operations.

- **`dto/`** - Data Transfer Objects:
    - `AwardSummaryStats` - Stores award-related statistics.
    - `EmployeeModel` - Represents employee data.
    - `OrganizationModel` - Represents organization data.

- **`messaging/`** - Handles asynchronous messaging:
    - `ActivityRollbackMessageHandler` - Manages rollback operations for failed activities.
    - `UpdateDundieAwardsMessageHandler` - Updates award-related data asynchronously.

- **`scheduler/`** - Manages scheduled jobs:
    - `QuartzJobScheduler` - Configures job scheduling using Quartz.

- **`service/`** - Business logic implementation:
    - `EmployeeService` (Interface)
    - `OrganizationService` (Interface)
    - `impl/` - Implementations:
        - `EmployeeServiceImpl`
        - `OrganizationServiceImpl`

### **Domain Layer (`domain/`)**
Contains core business entities and domain logic.

- **`entity/`** - Defines domain objects:
    - `Employee` - Employee entity.
    - `Organization` - Organization entity.
    - `QuartzJob` - Scheduled job entity.

- **`enums/`** - Enum definitions:
    - `JobStatus` - Represents the status of scheduled jobs.

- **`specification/`** - Business rule specifications (if applicable).

### **Infrastructure Layer (`infrastructure/`)**
Handles external integrations, database access, messaging, security, and configuration.

- **`config/`** - Application configurations:
    - `tenants/` - Multi-tenancy configuration.
        - `AsyncConfig` - Asynchronous processing setup.
        - `OrganizationDataSourceConfig` - Organization database configuration.

- **`messaging/`** - Message broker configuration and models.
    - `broker/`, `config/`, `model/`, `rabbitmq/`

- **`quartz/`** - Quartz job scheduling framework setup:
    - `AutowiringJobFactory`
    - `MessageBrokerSubscriptionJob`
    - `QuartzConfig`

- **`redis/`** - Redis caching configuration:
    - `RedisConfig`
    - `RedisProperties`

- **`repository/`** - Database repositories:
    - `projection/` - Projections and query interfaces.
        - `EmployeeRepository`
        - `OrganizationRepository`
        - `QuartzJobRepository`

- **`rest/`** - REST controllers:
    - `EmployeeController`
    - `OrganizationController`

- **`security/`** - Security configurations:
    - `SecurityConfiguration`

## Infrastructure and Dependencies
This project creates the required infrastructure using a **Docker Compose** file, which sets up essential services such as the **database**, **Redis server**, and **RabbitMQ**.

- **Redis** is used for storing award-related data, ensuring fast retrieval and caching.
- **Security** relies on **JWT tokens** generated by the authentication module.
- The **authentication module** communicates with the **activity module** via **RabbitMQ queues** to handle messaging and event-driven operations.

## Setup & Execution
1. Clone the repository.
2. Configure the application properties.
3. Build and run the service using:
   ```sh
   ./gradlew bootRun
   ```
4. Access the REST APIs and scheduled jobs through configured endpoints.

## License
This project is licensed under the MIT License.

